{"name":"Permissionsdispatcher","tagline":"Provides simple annotation-based API to handle runtime permissions in   Android M.","body":"# PermissionsDispatcher\r\n\r\n[![Build Status](https://travis-ci.org/hotchemi/PermissionsDispatcher.svg?branch=master)](https://travis-ci.org/hotchemi/PermissionsDispatcher)\r\n\r\n![image](https://raw.githubusercontent.com/hotchemi/PermissionsDispatcher/master/art/logo.png)\r\n\r\nPermissionsDispatcher provides a simple annotation-based API to handle runtime permissions in Android Marshmallow.\r\n\r\n[Runtime permissions](https://developer.android.com/preview/features/runtime-permissions.html) are great for users, but can be tedious to implement correctly for developers, requiring a lot of boilerplate code.\r\n\r\nThis library lifts the burden that comes with writing a bunch of check statements whether a permission has been granted or not from you, in order to keep your code clean and safe.\r\n\r\n**The library is 100% reflection-free.**\r\n\r\n## Download\r\n\r\nTo add it to your project, include the following in your **project** `build.gradle` file:\r\n\r\n```groovy\r\nbuildscript {\r\n  dependencies {\r\n    classpath 'com.neenbedankt.gradle.plugins:android-apt:1.8'\r\n  }\r\n}\r\n```\r\n\r\nAnd on your **app module** `build.gradle`:\r\n\r\n`${latest.version}` is [![Download](https://api.bintray.com/packages/hotchemi/maven/permissionsdispatcher/images/download.svg)](https://bintray.com/hotchemi/maven/permissionsdispatcher/_latestVersion)\r\n\r\n```groovy\r\napply plugin: 'android-apt'\r\n\r\ndependencies {\r\n  compile 'com.github.hotchemi:permissionsdispatcher:${latest.version}'\r\n  apt 'com.github.hotchemi:permissionsdispatcher-processor:${latest.version}'\r\n}\r\n```\r\n\r\n## Usage\r\n\r\nHere's a minimum example, in which we register a `MainActivity` which requires `Manifest.permission.CAMERA`.\r\n\r\n### 1. Attach annotations\r\n\r\nPermissionsDispatcher introduces only a few annotations, keeping its general API concise:\r\n\r\n> NOTE: Annotated methods must not be `private`.\r\n\r\n|Annotation|Required|Description|\r\n|---|---|---|\r\n|`@RuntimePermissions`|**✓**|Register an `Activity` or `Fragment` to handle permissions|\r\n|`@NeedsPermission`|**✓**|Annotate a method which performs the action that requires one or more permissions|\r\n|`@OnShowRationale`||Annotate a method which explains why the permission/s is/are needed. It passes in a `PermissionRequest` object which can be used to continue or abort the current permission request upon user input|\r\n|`@OnPermissionDenied`||Annotate a method which is invoked if the user doesn't grant the permissions|\r\n|`@OnNeverAskAgain`||Annotate a method which is invoked if the user chose to have the device \"never ask again\" about a permission|\r\n\r\n```java\r\n@RuntimePermissions\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    @NeedsPermission(Manifest.permission.CAMERA)\r\n    void showCamera() {\r\n        getSupportFragmentManager().beginTransaction()\r\n                .replace(R.id.sample_content_fragment, CameraPreviewFragment.newInstance())\r\n                .addToBackStack(\"camera\")\r\n                .commitAllowingStateLoss();\r\n    }\r\n\r\n    @OnShowRationale(Manifest.permission.CAMERA)\r\n    void showRationaleForCamera(PermissionRequest request) {\r\n        new AlertDialog.Builder(this)\r\n            .setMessage(R.string.permission_camera_rationale)\r\n            .setPositiveButton(R.string.button_allow, (dialog, button) -> request.proceed())\r\n            .setNegativeButton(R.string.button_deny, (dialog, button) -> request.cancel())\r\n            .show();\r\n    }\r\n\r\n    @OnPermissionDenied(Manifest.permission.CAMERA)\r\n    void showDeniedForCamera() {\r\n        Toast.makeText(this, R.string.permission_camera_denied, Toast.LENGTH_SHORT).show();\r\n    }\r\n\r\n    @OnNeverAskAgain(Manifest.permission.CAMERA)\r\n    void showNeverAskForCamera() {\r\n        Toast.makeText(this, R.string.permission_camera_neverask, Toast.LENGTH_SHORT).show();\r\n    }\r\n}\r\n```\r\n\r\n### 2. Delegate to generated class\r\n\r\nUpon compilation, PermissionsDispatcher generates a class for `MainActivityPermissionsDispatcher`, which you can use to safely access these permission-protected methods.\r\n\r\nThe only step you have to do is delegating the work to this helper class:\r\n\r\n```java\r\n@Override\r\nprotected void onCreate(Bundle savedInstanceState) {\r\n    super.onCreate(savedInstanceState);\r\n    setContentView(R.layout.activity_main);\r\n    findViewById(R.id.button_camera).setOnClickListener(v -> {\r\n      // NOTE: delegate the permission handling to generated method\r\n      MainActivityPermissionsDispatcher.showCameraWithCheck(this);\r\n    });\r\n    findViewById(R.id.button_contacts).setOnClickListener(v -> {\r\n      // NOTE: delegate the permission handling to generated method\r\n      MainActivityPermissionsDispatcher.showContactsWithCheck(this);\r\n    });\r\n}\r\n\r\n@Override\r\npublic void onRequestPermissionsResult(int requestCode, String[] permissions, int[] grantResults) {\r\n    super.onRequestPermissionsResult(requestCode, permissions, grantResults);\r\n    // NOTE: delegate the permission handling to generated method\r\n    MainActivityPermissionsDispatcher.onRequestPermissionsResult(this, requestCode, grantResults);\r\n}\r\n```\r\n\r\nCheck out the [sample](https://github.com/hotchemi/PermissionsDispatcher/tree/master/sample) and [generated class](https://github.com/hotchemi/PermissionsDispatcher/blob/master/art/MainActivityPermissionsDispatcher.java) for more details.\r\n\r\n## Note\r\n\r\n- PermissionsDispatcher depends on the `support-v4` library by default, in order to be able to use some permission compat classes.\r\n- You can use this library with JDK 1.6 or up, but we test library's behaviour on the JDK 1.8 because it has been becoming the default of Android development.\r\n\r\n### Fragment Support\r\n\r\nPermissionsDispatcher is supported on **API levels 4 and up**, with which you get support for annotating `android.app.Activity` and `android.support.v4.app.Fragment` sub-classes out of the box.\r\n\r\nIn case you rely on `android.app.Fragment` in your app, you can use these with PermissionsDispatcher as well!\r\n\r\nSimply add a dependency on the `support-v13` library alongside PermissionsDispatcher in your project, and it will enable support for native fragments.\r\n\r\n### For 1.x user\r\n\r\n- [Migrating to 2.x](https://github.com/hotchemi/PermissionsDispatcher/wiki/Migrating-to-2.x)\r\n\r\n## Licence\r\n\r\n```\r\nCopyright 2016 Shintaro Katafuchi, Marcel Schnelle\r\n\r\nLicensed under the Apache License, Version 2.0 (the \"License\");\r\nyou may not use this file except in compliance with the License.\r\nYou may obtain a copy of the License at\r\n\r\n   http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nUnless required by applicable law or agreed to in writing, software\r\ndistributed under the License is distributed on an \"AS IS\" BASIS,\r\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\nSee the License for the specific language governing permissions and\r\nlimitations under the License.\r\n```\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}